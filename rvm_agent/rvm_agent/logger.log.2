2020-07-07 17:35:20,989 INFO worker.py Class: ThreadPrometheusCollector: 127.0.0.1:15000 run 
Prometheus collector started with parameters
host: 127.0.0.1
port: 15000
interval: 1
Prometheus Job: NS-fgt-9f62028-cbe4-4d07-b89d-e39d07943175-VNF-spr2
Kafka Topic: prometheus
Labels: [
    {
        "key": "nsId",
        "value": "fgt-9f62028-cbe4-4d07-b89d-e39d07943175"
    },
    {
        "key": "vnfdId",
        "value": "spr2"
    },
    {
        "key": "instance",
        "value": "NS-fgt-9f62028-cbe4-4d07-b89d-e39d07943175-VNF-spr2"
    },
    {
        "key": "exporter",
        "value": "onewaylatency_exporter"
    }
]
2020-07-08 13:58:18,514 INFO worker.py Class: RVM_agent __init__ Agent uses bootstrap servers: 192.168.100.220
2020-07-08 13:58:18,517 INFO worker.py Class: RVM_agent __init__ Agent uses forward topic: vm_agent_1_forward
2020-07-08 13:58:18,517 INFO worker.py Class: RVM_agent __init__ Agent uses backward topic: vm_agent_1_backward
2020-07-08 13:58:18,518 INFO worker.py Class: RVM_agent __init__ Agent uses group.id: vm_agent_1_forward
2020-07-08 13:58:18,520 INFO worker.py Class: RVM_agent check_messages Agent started
2020-07-08 13:58:18,522 INFO worker.py Class: ThreadKeepAlive run Agent started keepalive proccess
2020-07-08 14:00:17,000 INFO worker.py Class: RVM_agent check_messages Agent received Message
2020-07-08 14:00:17,003 INFO worker.py Class: RVM_agent check_messages 
{
    "host": "127.0.0.1",
    "port": "15000",
    "interval": "1",
    "labels": [
        {
            "key": "nsId",
            "value": "fgt-9f62028-cbe4-4d07-b89d-e39d07943175"
        },
        {
            "key": "vnfdId",
            "value": "spr2"
        },
        {
            "key": "instance",
            "value": "NS-fgt-9f62028-cbe4-4d07-b89d-e39d07943175-VNF-spr2"
        },
        {
            "key": "exporter",
            "value": "onewaylatency_exporter"
        }
    ],
    "params": [
        {
            "key": "ip",
            "value": "127.0.0.1"
        },
        {
            "key": "polling",
            "value": "2"
        }
    ],
    "collector_id": "127.0.0.1:15000",
    "agent_id": "vm_agent_1",
    "prometheus_topic": "prometheus",
    "node_url_suffix": "/metrics",
    "prometheus_job": "NS-fgt-9f62028-cbe4-4d07-b89d-e39d07943175-VNF-spr2",
    "object_type": "add_prometheus_collector"
}
2020-07-08 14:00:35,553 INFO worker.py Class: ThreadPrometheusCollector: 127.0.0.1:15000 __init__ Started
2020-07-08 14:00:35,562 INFO worker.py Class: ThreadPrometheusCollector: 127.0.0.1:15000 run 
Prometheus collector started with parameters
host: 127.0.0.1
port: 15000
interval: 1
Prometheus Job: NS-fgt-9f62028-cbe4-4d07-b89d-e39d07943175-VNF-spr2
Kafka Topic: prometheus
Labels: [
    {
        "key": "nsId",
        "value": "fgt-9f62028-cbe4-4d07-b89d-e39d07943175"
    },
    {
        "key": "vnfdId",
        "value": "spr2"
    },
    {
        "key": "instance",
        "value": "NS-fgt-9f62028-cbe4-4d07-b89d-e39d07943175-VNF-spr2"
    },
    {
        "key": "exporter",
        "value": "onewaylatency_exporter"
    }
]
2020-07-08 14:00:35,563 INFO worker.py Class: RVM_agent check_messages Agent prepeared the answer on the message
2020-07-08 14:00:35,566 INFO worker.py Class: RVM_agent check_messages 
{
    "host": "127.0.0.1",
    "port": "15000",
    "interval": "1",
    "labels": [
        {
            "key": "nsId",
            "value": "fgt-9f62028-cbe4-4d07-b89d-e39d07943175"
        },
        {
            "key": "vnfdId",
            "value": "spr2"
        },
        {
            "key": "instance",
            "value": "NS-fgt-9f62028-cbe4-4d07-b89d-e39d07943175-VNF-spr2"
        },
        {
            "key": "exporter",
            "value": "onewaylatency_exporter"
        }
    ],
    "params": [
        {
            "key": "ip",
            "value": "127.0.0.1"
        },
        {
            "key": "polling",
            "value": "2"
        }
    ],
    "collector_id": "127.0.0.1:15000",
    "agent_id": "vm_agent_1",
    "prometheus_topic": "prometheus",
    "node_url_suffix": "/metrics",
    "prometheus_job": "NS-fgt-9f62028-cbe4-4d07-b89d-e39d07943175-VNF-spr2",
    "object_type": "added_prometheus_collector"
}
2020-07-08 14:00:35,567 INFO worker.py Class: RVM_agent return_to_server Agent transmitted the answer
2020-07-08 14:00:35,639 INFO worker.py Class: RVM_agent delivery_report Answer delivered to vm_agent_1_backward [0]
2020-07-08 14:00:36,603 INFO worker.py Class: RVM_agent check_messages Agent received Message
2020-07-08 14:00:36,605 INFO worker.py Class: RVM_agent check_messages 
{
    "args": [],
    "env": {},
    "cwd": "/tmp",
    "body": [
        "#!/bin/bash",
        "",
        "STATUS=\"$(systemctl is-active onewaylatency_exporter.service)\"",
        "if [ \"${STATUS}\" = \"active\" ]; then",
        "    echo \" Service onewaylatency_exporter.service running.... so exiting \"",
        "    exit 1",
        "fi",
        "",
        "mkdir -p /opt/onewaylatency_exporter",
        "wget http://127.0.0.1:8989/resources/files/exporters/onewaylatency_exporter/exporter_one_way_latency.py -O /opt/onewaylatency_exporter/exporter_one_way_latency.py",
        "wget http://127.0.0.1:8989/resources/files/exporters/onewaylatency_exporter/requirements.txt -O /opt/onewaylatency_exporter/requirements.txt",
        "pip3 install -r /opt/onewaylatency_exporter/requirements.txt",
        "",
        "cat << EOF > /etc/systemd/system/onewaylatency_exporter.service",
        "[Unit]",
        "Description=onewaylatency_exporter",
        "",
        "[Service]",
        "Type=simple",
        "WorkingDirectory=/opt/onewaylatency_exporter",
        "ExecStart=/usr/bin/python3 /opt/onewaylatency_exporter/exporter_one_way_latency.py",
        "Restart=on-failure",
        "[Install]",
        "WantedBy=multi-user.target",
        "EOF",
        "",
        "sudo systemctl daemon-reload",
        "",
        "sudo systemctl enable onewaylatency_exporter",
        "",
        "sudo systemctl start onewaylatency_exporter"
    ],
    "agent_id": "vm_agent_1",
    "command_id": 1,
    "type_message": "bash_script",
    "object_type": "command"
}
2020-07-08 14:00:36,726 INFO worker.py Class: RVM_agent execute_command outs message:  Service onewaylatency_exporter.service running.... so exiting 

2020-07-08 14:00:36,726 INFO worker.py Class: RVM_agent execute_command errs message: 
2020-07-08 14:00:36,727 INFO worker.py Class: RVM_agent execute_command returncode message: 1
2020-07-08 14:00:36,728 INFO worker.py Class: RVM_agent check_messages Agent prepeared the answer on the message
2020-07-08 14:00:36,729 INFO worker.py Class: RVM_agent check_messages 
{
    "returncode": 1,
    "outs": " Service onewaylatency_exporter.service running.... so exiting \n",
    "errs": "",
    "agent_id": "vm_agent_1",
    "command_id": 1,
    "object_type": "command_response"
}
2020-07-08 14:00:36,730 INFO worker.py Class: RVM_agent return_to_server Agent transmitted the answer
2020-07-08 14:00:36,762 INFO worker.py Class: RVM_agent delivery_report Answer delivered to vm_agent_1_backward [0]
2020-09-15 20:58:14,472 INFO worker.py Class: RVM_agent __init__ Agent uses bootstrap servers: 192.168.100.1
2020-09-15 20:58:14,473 INFO worker.py Class: RVM_agent __init__ Agent uses forward topic: vm_agent_4_forward
2020-09-15 20:58:14,473 INFO worker.py Class: RVM_agent __init__ Agent uses backward topic: vm_agent_4_backward
2020-09-15 20:58:14,473 INFO worker.py Class: RVM_agent __init__ Agent uses group.id: vm_agent_4_forward
2020-09-15 20:58:14,477 INFO worker.py Class: RVM_agent check_messages Agent started
2020-09-15 20:58:14,481 INFO worker.py Class: ThreadKeepAlive run Agent started keepalive proccess
2020-09-15 20:58:34,523 INFO worker.py Class: RVM_agent __init__ Agent uses bootstrap servers: 192.168.100.220
2020-09-15 20:58:34,524 INFO worker.py Class: RVM_agent __init__ Agent uses forward topic: vm_agent_4_forward
2020-09-15 20:58:34,524 INFO worker.py Class: RVM_agent __init__ Agent uses backward topic: vm_agent_4_backward
2020-09-15 20:58:34,525 INFO worker.py Class: RVM_agent __init__ Agent uses group.id: vm_agent_4_forward
2020-09-15 20:58:34,527 INFO worker.py Class: RVM_agent check_messages Agent started
2020-09-15 20:58:34,529 INFO worker.py Class: ThreadKeepAlive run Agent started keepalive proccess
2020-09-15 20:58:39,755 INFO worker.py Class: RVM_agent check_messages Agent received Message
2020-09-15 20:58:39,757 INFO worker.py Class: RVM_agent check_messages 
{
    "args": [],
    "env": {},
    "cwd": "/tmp",
    "body": [
        "#!/bin/bash",
        "",
        "STATUS=\"$(systemctl is-active onewaylatency_exporter.service)\"",
        "if [ \"${STATUS}\" = \"active\" ]; then",
        "    echo \" Service onewaylatency_exporter.service running.... so exiting \"",
        "    exit 1",
        "fi",
        "",
        "mkdir -p /opt/onewaylatency_exporter",
        "wget http://192.168.100.1:8989/resources/files/exporters/onewaylatency_exporter/exporter_one_way_latency.py -O /opt/onewaylatency_exporter/exporter_one_way_latency.py",
        "wget http://192.168.100.1:8989/resources/files/exporters/onewaylatency_exporter/requirements.txt -O /opt/onewaylatency_exporter/requirements.txt",
        "pip3 install -r /opt/onewaylatency_exporter/requirements.txt",
        "",
        "cat << EOF > /etc/systemd/system/onewaylatency_exporter.service",
        "[Unit]",
        "Description=onewaylatency_exporter",
        "",
        "[Service]",
        "Type=simple",
        "WorkingDirectory=/opt/onewaylatency_exporter",
        "ExecStart=/usr/bin/python3 /opt/onewaylatency_exporter/exporter_one_way_latency.py",
        "Restart=on-failure",
        "[Install]",
        "WantedBy=multi-user.target",
        "EOF",
        "",
        "sudo systemctl daemon-reload",
        "",
        "sudo systemctl enable onewaylatency_exporter",
        "",
        "sudo systemctl start onewaylatency_exporter"
    ],
    "agent_id": "vm_agent_4",
    "command_id": 4,
    "type_message": "bash_script",
    "object_type": "command"
}
2020-09-15 20:58:39,783 INFO worker.py Class: RVM_agent execute_command outs message: 
2020-09-15 20:58:39,783 INFO worker.py Class: RVM_agent execute_command errs message: sudo: a terminal is required to read the password; either use the -S option to read from standard input or configure an askpass helper

2020-09-15 20:58:39,784 INFO worker.py Class: RVM_agent execute_command returncode message: 1
2020-09-15 20:58:39,784 INFO worker.py Class: RVM_agent check_messages Agent prepeared the answer on the message
2020-09-15 20:58:39,784 INFO worker.py Class: RVM_agent check_messages 
{
    "returncode": 1,
    "outs": "",
    "errs": "sudo: a terminal is required to read the password; either use the -S option to read from standard input or configure an askpass helper\n",
    "agent_id": "vm_agent_4",
    "command_id": 4,
    "object_type": "command_response"
}
2020-09-15 20:58:39,785 INFO worker.py Class: RVM_agent return_to_server Agent transmitted the answer
2020-09-15 20:58:39,816 INFO worker.py Class: RVM_agent delivery_report Answer delivered to vm_agent_4_backward [0]
2020-09-15 20:58:39,817 INFO worker.py Class: RVM_agent check_messages Agent received Message
2020-09-15 20:58:39,819 INFO worker.py Class: RVM_agent check_messages 
{
    "host": "127.0.0.1",
    "port": "15000",
    "interval": "15",
    "labels": [
        {
            "key": "nsId",
            "value": "fgt-9f62028-cbe4-4d07-b89d-e39d07943175"
        },
        {
            "key": "vnfdId",
            "value": "webserver"
        },
        {
            "key": "instance",
            "value": "NS-fgt-9f62028-cbe4-4d07-b89d-e39d07943175-VNF-webserver"
        },
        {
            "key": "exporter",
            "value": "onewaylatency_exporter"
        }
    ],
    "params": [],
    "collector_id": "127.0.0.1:15000",
    "agent_id": "vm_agent_4",
    "prometheus_topic": "prometheus",
    "node_url_suffix": null,
    "prometheus_job": "NS-fgt-9f62028-cbe4-4d07-b89d-e39d07943175-VNF-webserver",
    "object_type": "add_prometheus_collector"
}
2020-09-15 21:30:59,909 INFO worker.py Class: RVM_agent __init__ Agent uses bootstrap servers: 192.168.100.220
2020-09-15 21:30:59,910 INFO worker.py Class: RVM_agent __init__ Agent uses forward topic: vm_agent_4_forward
2020-09-15 21:30:59,910 INFO worker.py Class: RVM_agent __init__ Agent uses backward topic: vm_agent_4_backward
2020-09-15 21:30:59,911 INFO worker.py Class: RVM_agent __init__ Agent uses group.id: vm_agent_4_forward
2020-09-15 21:30:59,914 INFO worker.py Class: RVM_agent check_messages Agent started
2020-09-15 21:30:59,917 INFO worker.py Class: ThreadKeepAlive run Agent started keepalive proccess
2020-09-15 21:31:05,183 INFO worker.py Class: RVM_agent check_messages Agent received Message
2020-09-15 21:31:05,184 INFO worker.py Class: RVM_agent check_messages 
{
    "args": [],
    "env": {},
    "cwd": "/tmp",
    "body": [
        "#!/bin/bash",
        "",
        "STATUS=\"$(systemctl is-active onewaylatency_exporter.service)\"",
        "if [ \"${STATUS}\" = \"active\" ]; then",
        "    echo \" Service onewaylatency_exporter.service running.... so exiting \"",
        "    exit 1",
        "fi",
        "",
        "mkdir -p /opt/onewaylatency_exporter",
        "wget http://192.168.100.1:8989/resources/files/exporters/onewaylatency_exporter/exporter_one_way_latency.py -O /opt/onewaylatency_exporter/exporter_one_way_latency.py",
        "wget http://192.168.100.1:8989/resources/files/exporters/onewaylatency_exporter/requirements.txt -O /opt/onewaylatency_exporter/requirements.txt",
        "pip3 install -r /opt/onewaylatency_exporter/requirements.txt",
        "",
        "cat << EOF > /etc/systemd/system/onewaylatency_exporter.service",
        "[Unit]",
        "Description=onewaylatency_exporter",
        "",
        "[Service]",
        "Type=simple",
        "WorkingDirectory=/opt/onewaylatency_exporter",
        "ExecStart=/usr/bin/python3 /opt/onewaylatency_exporter/exporter_one_way_latency.py",
        "Restart=on-failure",
        "[Install]",
        "WantedBy=multi-user.target",
        "EOF",
        "",
        "sudo systemctl daemon-reload",
        "",
        "sudo systemctl enable onewaylatency_exporter",
        "",
        "sudo systemctl start onewaylatency_exporter"
    ],
    "agent_id": "vm_agent_4",
    "command_id": 1,
    "type_message": "bash_script",
    "object_type": "command"
}
2020-09-15 21:31:05,208 INFO worker.py Class: RVM_agent execute_command outs message: 
2020-09-15 21:31:05,208 INFO worker.py Class: RVM_agent execute_command errs message: sudo: a terminal is required to read the password; either use the -S option to read from standard input or configure an askpass helper

2020-09-15 21:31:05,208 INFO worker.py Class: RVM_agent execute_command returncode message: 1
2020-09-15 21:31:05,209 INFO worker.py Class: RVM_agent check_messages Agent prepeared the answer on the message
2020-09-15 21:31:05,209 INFO worker.py Class: RVM_agent check_messages 
{
    "returncode": 1,
    "outs": "",
    "errs": "sudo: a terminal is required to read the password; either use the -S option to read from standard input or configure an askpass helper\n",
    "agent_id": "vm_agent_4",
    "command_id": 1,
    "object_type": "command_response"
}
2020-09-15 21:31:05,210 INFO worker.py Class: RVM_agent return_to_server Agent transmitted the answer
2020-09-15 21:31:05,240 INFO worker.py Class: RVM_agent delivery_report Answer delivered to vm_agent_4_backward [0]
2020-09-15 21:31:05,240 INFO worker.py Class: RVM_agent check_messages Agent received Message
2020-09-15 21:31:05,242 INFO worker.py Class: RVM_agent check_messages 
{
    "host": "127.0.0.1",
    "port": "15000",
    "interval": "15",
    "labels": [
        {
            "key": "nsId",
            "value": "fgt-9f62028-cbe4-4d07-b89d-e39d07943175"
        },
        {
            "key": "vnfdId",
            "value": "webserver"
        },
        {
            "key": "instance",
            "value": "NS-fgt-9f62028-cbe4-4d07-b89d-e39d07943175-VNF-webserver"
        },
        {
            "key": "exporter",
            "value": "onewaylatency_exporter"
        }
    ],
    "params": [],
    "collector_id": "127.0.0.1:15000",
    "agent_id": "vm_agent_4",
    "prometheus_topic": "prometheus",
    "node_url_suffix": null,
    "prometheus_job": "NS-fgt-9f62028-cbe4-4d07-b89d-e39d07943175-VNF-webserver",
    "object_type": "add_prometheus_collector"
}
2020-09-15 21:31:10,475 INFO worker.py Class: RVM_agent __init__ Agent uses bootstrap servers: 192.168.100.220
2020-09-15 21:31:10,477 INFO worker.py Class: RVM_agent __init__ Agent uses forward topic: vm_agent_4_forward
2020-09-15 21:31:10,477 INFO worker.py Class: RVM_agent __init__ Agent uses backward topic: vm_agent_4_backward
2020-09-15 21:31:10,477 INFO worker.py Class: RVM_agent __init__ Agent uses group.id: vm_agent_4_forward
2020-09-15 21:31:10,480 INFO worker.py Class: RVM_agent check_messages Agent started
2020-09-15 21:31:10,482 INFO worker.py Class: ThreadKeepAlive run Agent started keepalive proccess
2020-09-15 21:31:15,645 INFO worker.py Class: RVM_agent check_messages Agent received Message
2020-09-15 21:31:15,647 INFO worker.py Class: RVM_agent check_messages 
{
    "args": [],
    "env": {},
    "cwd": "/tmp",
    "body": [
        "#!/bin/bash",
        "",
        "STATUS=\"$(systemctl is-active onewaylatency_exporter.service)\"",
        "if [ \"${STATUS}\" = \"active\" ]; then",
        "    echo \" Service onewaylatency_exporter.service running.... so exiting \"",
        "    exit 1",
        "fi",
        "",
        "mkdir -p /opt/onewaylatency_exporter",
        "wget http://192.168.100.1:8989/resources/files/exporters/onewaylatency_exporter/exporter_one_way_latency.py -O /opt/onewaylatency_exporter/exporter_one_way_latency.py",
        "wget http://192.168.100.1:8989/resources/files/exporters/onewaylatency_exporter/requirements.txt -O /opt/onewaylatency_exporter/requirements.txt",
        "pip3 install -r /opt/onewaylatency_exporter/requirements.txt",
        "",
        "cat << EOF > /etc/systemd/system/onewaylatency_exporter.service",
        "[Unit]",
        "Description=onewaylatency_exporter",
        "",
        "[Service]",
        "Type=simple",
        "WorkingDirectory=/opt/onewaylatency_exporter",
        "ExecStart=/usr/bin/python3 /opt/onewaylatency_exporter/exporter_one_way_latency.py",
        "Restart=on-failure",
        "[Install]",
        "WantedBy=multi-user.target",
        "EOF",
        "",
        "sudo systemctl daemon-reload",
        "",
        "sudo systemctl enable onewaylatency_exporter",
        "",
        "sudo systemctl start onewaylatency_exporter"
    ],
    "agent_id": "vm_agent_4",
    "command_id": 2,
    "type_message": "bash_script",
    "object_type": "command"
}
2020-09-15 21:31:15,663 INFO worker.py Class: RVM_agent execute_command outs message: 
2020-09-15 21:31:15,663 INFO worker.py Class: RVM_agent execute_command errs message: sudo: a terminal is required to read the password; either use the -S option to read from standard input or configure an askpass helper

2020-09-15 21:31:15,664 INFO worker.py Class: RVM_agent execute_command returncode message: 1
2020-09-15 21:31:15,664 INFO worker.py Class: RVM_agent check_messages Agent prepeared the answer on the message
2020-09-15 21:31:15,665 INFO worker.py Class: RVM_agent check_messages 
{
    "returncode": 1,
    "outs": "",
    "errs": "sudo: a terminal is required to read the password; either use the -S option to read from standard input or configure an askpass helper\n",
    "agent_id": "vm_agent_4",
    "command_id": 2,
    "object_type": "command_response"
}
2020-09-15 21:31:15,665 INFO worker.py Class: RVM_agent return_to_server Agent transmitted the answer
